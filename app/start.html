<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <title>love out west</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <link rel="shortcut icon" href="/favicon.ico">
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        <!-- build:css styles/vendor.css -->
        <!-- bower:css -->
        <link rel="stylesheet" href="../bower_components/bootstrap/dist/css/bootstrap.css">
        <!-- endbower -->
        <!-- endbuild -->
        <!-- build:css(.tmp) styles/main.css -->
        <link rel="stylesheet" href="styles/main.css">
        <!-- endbuild -->
    </head>
    <body>
    
    <script src="../bower_components/jquery/dist/jquery.js"></script>

    <script>var fbid = -1</script>

    <script>
  // This is called with the results from from FB.getLoginStatus().
  function statusChangeCallback(response) {
    console.log('statusChangeCallback');
    console.log(response);
    // The response object is returned with a status field that lets the
    // app know the current login status of the person.
    // Full docs on the response object can be found in the documentation
    // for FB.getLoginStatus().
    if (response.status === 'connected') {
      // Logged into your app and Facebook.
      fbid = response.authResponse.userID;
      testAPI();
    } else if (response.status === 'not_authorized') {
      // The person is logged into Facebook, but not your app.
      document.getElementById('status').innerHTML = 'Please log ' +
        'into this app.';
    } else {
      // The person is not logged into Facebook, so we're not sure if
      // they are logged into this app or not.
      document.getElementById('status').innerHTML = 'Please log ' +
        'into Facebook.';
    }
  }

  // This function is called when someone finishes with the Login
  // Button.  See the onlogin handler attached to it in the sample
  // code below.
  function checkLoginState() {
    FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
    });
  }

  window.fbAsyncInit = function() {
  FB.init({
    appId      : '340968969400990',
    cookie     : true,  // enable cookies to allow the server to access 
                        // the session
    xfbml      : true,  // parse social plugins on this page
    version    : 'v2.0' // use version 2.0
  });

  // Now that we've initialized the JavaScript SDK, we call 
  // FB.getLoginStatus().  This function gets the state of the
  // person visiting this page and can return one of three states to
  // the callback you provide.  They can be:
  //
  // 1. Logged into your app ('connected')
  // 2. Logged into Facebook, but not your app ('not_authorized')
  // 3. Not logged into Facebook and can't tell if they are logged into
  //    your app or not.
  //
  // These three cases are handled in the callback function.

  FB.getLoginStatus(function(response) {
    statusChangeCallback(response);
  });

  };

  // Load the SDK asynchronously
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));

  // Here we run a very simple test of the Graph API after login is
  // successful.  See statusChangeCallback() for when this call is made.
  function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
      console.log('Successful login for: ' + response.name);
      document.getElementById('status').innerHTML =
        'Thanks for logging in, ' + response.name + '!';
    });
  }
</script>

<!--
  Below we include the Login Button social plugin. This button uses
  the JavaScript SDK to present a graphical Login button that triggers
  the FB.login() function when clicked.
-->

<div id="fbbutton" style="display: none;">
<fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
</fb:login-button>
</div>

<div id="status" style="display: none;">
</div>

        <!--[if lt IE 10]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <div class="container">
            <div class="header">
                <h3 class="text-muted">love out west</h3>
            </div>
    
            <div class="jumbotron">
                <img src="wol_logo.png"></img>
                <h2>Need company?</h2>
                <p class="lead">Never go to a show alone again!</p>
                <p><a class="btn btn-lg btn-success scroll" href="#bands">Get Started! <span class="glyphicon glyphicon-ok"></span></a></p>
            </div>
    
            <div class="row marketing">
                <div class="col-lg-6">
                    <h4>Log in with your facebook account,
                        choose a show or event and we will find
                        a suitable partner/friend/soul mate to accompany you
                        to the event!
                    </h4>
                </div>
            </div>

        <div id="bands">
            <div id="torsdag" class="anchor">
            <h3>Thursday:</h3>
            </div>
            <div id="fredag" class="anchor">
            <h3>Friday:</h3>
            </div>
            <div id="lordag" class="anchor">
            <h3>Saturday:</h3>
            </div>
            <a class="btn btn-lg btn-success scroll" href="#prefs">Next</a><br>
        </div>

        <div id="prefs" class="jumbotron">
            <h3>Who do you wanna meat?</h3>
            <form>
            <p>Gender</p>
            <select name="gender" style="color: #000000">
            <option value="dnm" style="color: #000000">Whatever</option>
            <option value="female" style="color: #000000">Female</option>
            <option value="male"  style="color: #000000">Male</option>
            <option value="other" style="color: #000000">Other</option>
            </select>

            <p>Age</p><input type="text" name="age">

            <p>Language</p>
            <select name="lang" style="color: #000000">
            <option value="en" style="color: #000000">English</option>
            <option value="se" style="color: #000000">Swedish</option>
            <option value="de" style="color: #000000">German</option>
            <option value="dk" style="color: #000000">Danish</option>
            <option value="no" style="color: #000000">Norwegian</option>
            </select> 
            </form>

        <!-- build:js scripts/vendor.js -->
        <!-- bower:js -->
        <script src="scripts/scroll.js"></script>  
        <script src="scripts/match.js"></script>  
        <script src="scripts/getArtists.js"></script>  
        <script src="scripts/getUsers.js"></script>  
        <!-- <script src="scripts/genMatches.js"></script> -->  
                
        <script>
            getArtists();
            var all_users = [];
            getUsers(all_users);
        </script>

            <script>
                function genMatches(fbid, all_users1) {
                        console.log("Lets generate some matches!");
                        var user1 = getUserByFBID(fbid, all_users1);
                        var matches = return_sorted_array(user1, all_users1);
                        
                        console.log(matches[0][1].length);

                        var num_of_matches = matches[0][1].length;

                        for (var i in matches) {
                            addOne(user1, all_users1[matches[i][0]]);
                        }   

               }
               
               function addOne(user1, match) {
                    var matches = get_matches(user1, match);
                    var num_of_matches = matches[0][0].length;
                     var mybands = ["Outkast", "The National", "Robyn"]
                    console.log(matches);
                    var bands = ["OutKast","Queens of the Stone Age","The National","Robyn","R\u00f6yksopp","Little Dragon","Icona Pop","Janelle Mon\u00e1e","Pusha T","Future","Neutral Milk Hotel","Poli\u00e7a","Blood Orange","Jamie xx","Joey Bada$$","Shlohmo","M\u00d8","I Break Horses","Darkside","Machinedrum","Marissa Nadler","Jungle","Jonathan Wilson","Jenny Wilson","Deafheaven","Forest Swords","Markus Kruneg\u00e5rd","Chloe Howl","Brody Dalle","Mighty Oaks","Circa Waves","Holly Herndon","Yumi Zouma","Hurula","Annika Norlin"];
    
                    var str = "";
                    str += "<p>Name: " + match.name + ", matches: " + num_of_matches + ": " + bands[2] + "</p><br>";
                    var div1 = document.getElementById('matches');
                    div1.innerHTML += str; 
               }

                $(document).ready("#gen").click(function() {
                    console.log("your id is " + fbid);
                    console.log(all_users);
                    genMatches(fbid, all_users);
                    console.log("derfa");
                });

            </script>
            <a id="gen" class="btn btn-lg btn-success scroll" href="#matches">Get me a match!</a>
        </div>

        <div id="matches">
        <h3>Matches</h3>        
        </div>


        <div id="users" hidden="true">
        </div>


        </div>

   
 
        <!-- endbower -->
        <!-- endbuild -->

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X');ga('send','pageview');
        </script>

        <!-- build:js scripts/plugins.js -->
        <script src="../bower_components/bootstrap/js/affix.js"></script>
        <script src="../bower_components/bootstrap/js/alert.js"></script>
        <script src="../bower_components/bootstrap/js/dropdown.js"></script>
        <script src="../bower_components/bootstrap/js/tooltip.js"></script>
        <script src="../bower_components/bootstrap/js/modal.js"></script>
        <script src="../bower_components/bootstrap/js/transition.js"></script>
        <script src="../bower_components/bootstrap/js/button.js"></script>
        <script src="../bower_components/bootstrap/js/popover.js"></script>
        <script src="../bower_components/bootstrap/js/carousel.js"></script>
        <script src="../bower_components/bootstrap/js/scrollspy.js"></script>
        <script src="../bower_components/bootstrap/js/collapse.js"></script>
        <script src="../bower_components/bootstrap/js/tab.js"></script>
        <!-- endbuild -->

        <!-- build:js({app,.tmp}) scripts/main.js -->
        <script src="scripts/main.js"></script>
        <!-- endbuild -->
</body>
</html>
